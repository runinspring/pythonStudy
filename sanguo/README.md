周末看了会`python`，真是一门适合数据分析的语言，刚学不久，先拿《三国演义》练练手。统计结果在文章后面，对技术不感兴趣的可以跳过。


##### 统计方法
中文的语义分析是一件非常困难的事情，更别说《三国演义》这种半文言半白话的小说了。我的方法是，用`python`找到可能是兵器或者姿势的一句话，然后再肉眼识别。因为兵器名和姿势名称只要出现一次就会记录下来，下次会被过滤掉，所以工作量其实并不大，一会儿就弄完了。

举例说明一下，比如我们可以通过武器`方天画戟`搜索到这句话:`威风凛凛，手执方天画戟，怒目而视`，其中的`手执`就是拿兵器的姿势。然后查找所有`手执`的语句：
`['手执藜杖', '手执方天画戟', '手执白刃', '手执长竿', '手执宝剑扶车而行', '手执长枪', '手执定旗杆', '手执大斧', '手执铜刀', '手执青龙刀', '手执长枪', '手执旗幡围绕', '手执长竿', '手执长竿', '手执羽扇', '手执长枪', '手执谏章', '手执长戈', '手执长矛', '手执铁棒击吾右臂', '手执铁链', '手执大红罗销金伞盖', '手执茅草一把', '手执其手', '手执钢刀', '手执羽扇', '手执刀', '手执蒂钟', '手执麈尾', '手执黄旗招飐', '手执七星皂旙', '手执七星皂幡', '手执皂幡', '手执绣旗', '手执旗剑']`，哇哦~ 一下子就找到了好多武器的名称，当然像 `手执茅草一把` 这种肉眼过滤掉就好了。


所以逻辑是这样的：通过一种兵器的名称=》找到拿兵器的姿势=》根据姿势找到更多的兵器=》根据兵器找到更多的姿势=》......

##### 技术点

* 通过武器查找姿势

取出武器名称前面的6个字，一般拿武器的姿势就包括在里面了。
例如:`挥关公使的青龙刀`

```
reg = re.compile(r'(.{6}%s)' %weapon)
```

* 通过姿势查找武器

取出拿武器的姿势到到下一个逗号或句号，武器名称一般就包括在内了。
例如:`掣了太史慈背上的短戟，`

```
reg = re.compile('%s(.*?)[，,。]' % pos)
```



[项目代码地址](https://github.com/runinspring/pythonStudy/tree/master/sanguo)

### 计算结果

##### 书中出现的兵器一共有`63`种，下面是它们的名称和出现次数：

`
刀:480；箭:350；剑:327；枪:299；弓:177；戟:115；鞭:84；弩:80；矛:53；钺:29；宝剑:22；羽扇:19；宝刀:17；青龙刀:15；大刀:14；大斧:14；叉:12；长枪:11；槊:10；利刃:8；短刀:7；硬弩:6；钢刀:5；双刀:4；长竿:4；铁锤:4；宝雕弓:4；青釭剑:4；双股剑:4；丈八蛇矛:4；丈八点钢矛:4；蒺藜:3；双戟:3；大戟:3；蒂钟:3；铁枪:3；大砍刀:3；青龙偃月刀:3；飞锤:2；钢鞭:2；铜锤:2；腰刀:2；长戈:2；藜杖:2；铁棒:2；短戟:2；丈八矛:2；方天画戟:2；戒刀:1；长矛:1；铜刀:1；白刃:1；钢斧:1；铁链:1；铁脊矛:1；七宝刀:1；蘸金斧:1；倚天剑:1；四楞铁简:1；青釭宝剑:1；七星皂旙:1；三尖两刃刀:1；蛇矛丈八枪:1；
`

从出现次数可以看出`刀，弓、箭，剑，枪，戟`是当时战争的绝对主力。

有意思的是，我们耳熟能详的兵器出现次数其实并不多。比如关羽用的`青龙偃月刀`只出现了3次，张飞的`丈八蛇矛`也只出现了4次。不过要是算上它们别称的则会增加不少。比如`青龙偃月刀+青龙刀`一共出现18次，`丈八蛇矛+蛇矛丈八枪+丈八点钢矛+丈八矛` 一共出现11次。关老爷的戏份还是比张飞多呀。


##### 再说下拿兵器的姿势，一共`32`种:
`手提,倒提,按定,手执,拔出,手捧,舞动,腰悬,手摇,手使,赍,射,佩,轮,仗,跨,悬,使,挥,掣,持,藏,挽,捻,用,提,挺,携,举,舞,取,拔`

虽然不知道统计出来有啥用，但不是挺有意思吗。





